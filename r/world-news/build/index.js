'use strict';(function(){function a(g){d=new google.maps.Map(document.getElementById('map'),{zoom:2,center:{lat:20,lng:20}}),d.addListener('zoom_changed',function(){var h=this.getZoom();h<e?$('.mdl-card__supporting-text').hide():$('.mdl-card__supporting-text').show()}),g.forEach(function(h){var i=new google.maps.LatLng(h.latlng[0],h.latlng[1]);new b(i,h.title,h.body,h.img,h.link,h.date,d)})}function b(g,h,i,j,k,l,m){this.latlng_=g,this.img_=j,this.title_=h,this.body_=i,this.link_=k,this.date_=l,this.map_=m,this.div_=null,this.setMap(m)}var d,e=4;b.prototype=new google.maps.OverlayView;var f=React.createClass({displayName:'News',render:function render(){var g={background:'url('+this.props.img+') bottom right 15% no-repeat #46B6AC',backgroundSize:'100% 100%',color:'#fff'};return React.createElement('div',{className:'card-square mdl-card mdl-shadow--2dp'},React.createElement('div',{className:'mdl-card__title mdl-card--expand',style:g},React.createElement('h2',{className:'mdl-card__title-text'},this.props.title)),React.createElement('div',{className:'mdl-card__supporting-text'},'\u66F4\u65B0\u6642\u9593: ',this.props.date,React.createElement('p',null,this.props.body,' ',React.createElement('a',{href:''},'\u89C0\u770B\u66F4\u591A...'))))}});b.prototype.onAdd=function(){var g=this,h=document.createElement('div');h.className='news',this.div_=h,google.maps.event.addDomListener(this.div_,'click',function(){google.maps.event.trigger(self,'click'),window.open(g.link_,name='_self')}),google.maps.event.addDomListener(this.div_,'mouseover',function(){d.getZoom()<e&&(g.div_.lastChild.lastChild.style.display='block',g.div_.style.width='220px',g.div_.style.height='300px'),g.div_.style.zIndex='999999'}),google.maps.event.addDomListener(this.div_,'mouseout',function(){d.getZoom()<e&&(g.div_.lastChild.lastChild.style.display='none',g.div_.style.width='150px',g.div_.style.height='130px'),g.div_.style.zIndex='1'}),React.render(React.createElement(f,{title:this.title_,body:this.body_,img:this.img_,date:this.date_}),h);var i=this.getPanes();i.overlayImage.appendChild(h)},b.prototype.draw=function(){var g=this.div_,h=this.getProjection().fromLatLngToDivPixel(this.latlng_);h&&(g.style.left=h.x+'px',g.style.top=h.y+'px',g.style.width='130px',g.style.height='100px')},b.prototype.onRemove=function(){this.div&&(this.div.parentNode.removeChild(this.div),this.div=null)},b.prototype.draw=function(){var g=this.div_,h=this.getProjection().fromLatLngToDivPixel(this.latlng_),i=d.getZoom();h&&(g.style.left=h.x+'px',g.style.top=h.y+'px',4>i?(g.style.width='150px',g.style.height='110px'):(g.style.width='220px',g.style.height='320px'))},b.prototype.onRemove=function(){this.div_.parentNode.removeChild(this.div_),this.div_=null},d3.json('./data/data.json',function(data){google.maps.event.addDomListener(window,'load',a(data))})})();
